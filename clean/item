function Remove-Files($days, $path) {
    $lastDateToKeep = (Get-Date).AddDays(-$days)

    if (-not (Test-Path $path)) {
        Write-Warning "Path '$path' does not exist. Skipping..."
        return
    }

    # First remove files
    Get-ChildItem -Path $path -Recurse -File -Force -ErrorAction SilentlyContinue |
    Where-Object { $_.LastWriteTime -lt $lastDateToKeep } |
    ForEach-Object {
        try {
            $item = Get-Item $_.FullName -ErrorAction SilentlyContinue
            if ($item) {
                Write-Output "Deleting file: $($item.FullName)"
                Remove-Item -Path $item.FullName -Force
            }
        } catch {
            Write-Error "Error deleting file: $_"
        }
    }

    # Then remove folders
    Get-ChildItem -Path $path -Recurse -Directory -Force -ErrorAction SilentlyContinue |
    Where-Object { $_.LastWriteTime -lt $lastDateToKeep } |
    ForEach-Object {
        try {
            $item = Get-Item $_.FullName -ErrorAction SilentlyContinue
            if ($item -and (Test-Path $item.FullName)) {
                Write-Output "Deleting directory: $($item.FullName)"
                Remove-Item -Path $item.FullName -Force -Recurse
            }
        } catch {
            Write-Error "Error deleting directory: $_"
        }
    }
}
